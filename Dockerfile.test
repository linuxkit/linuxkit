FROM mobylinux/alpine-qemu:a4558b652e94f54848f16d0fd5d2a9ebfd090070

COPY alpine/initrd.img .
COPY alpine/kernel/x86_64/vmlinuz64 .

RUN qemu-img create -f raw disk.img 100M

ENTRYPOINT [ "qemu-system-x86_64", "-drive", "file=disk.img,format=raw", "-device", "virtio-rng-pci", "-serial", "stdio", "-kernel", "vmlinuz64", "-initrd", "initrd.img", "-m", "1024", "-append", "earlyprintk=serial console=ttyS0 noapic mobyplatform=test", "-vnc", "none" ]
